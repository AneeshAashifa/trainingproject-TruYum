<mat-card class="admin-card">
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <div class="dashboard-icon">üçΩ</div>
        <div class="header-text">
          <h1 class="dashboard-title">Admin Dashboard</h1>
          <p class="dashboard-subtitle">Manage your restaurant menu and categories</p>
        </div>
      </div>
      <div class="header-actions">
        <div class="stats-card">
          <div class="stat-item">
            <span class="stat-number">{{ dataSource.length }}</span>
            <span class="stat-label">Total Items</span>
          </div>
        </div>
        <button mat-raised-button class="logout-btn" (click)="logout()">
          <mat-icon>logout</mat-icon>
          Logout
        </button>
      </div>
    </div>
  </div>

  <mat-tab-group class="dashboard-tabs">
    <mat-tab label="Menu Items">
      <div class="tab-content" *ngIf="!isLoading; else loading">
        <div class="search-section">
          <mat-form-field appearance="outline" class="search-bar">
            <mat-label>Search menu items</mat-label>
            <input matInput 
                   (input)="applyFilter($event)" 
                   [value]="searchValue"
                   placeholder="Type name, category, or description">
            <mat-icon matSuffix>search</mat-icon>
            <button mat-icon-button 
                    matSuffix 
                    *ngIf="searchValue" 
                    (click)="clearSearch()"
                    matTooltip="Clear search">
              <mat-icon>clear</mat-icon>
            </button>
          </mat-form-field>
          <button mat-raised-button class="add-item-btn" (click)="openAdd()">
            <mat-icon>add</mat-icon>
            Add New Item
          </button>
        </div>
        <div class="table-container">
          <div *ngIf="searchValue && dataSource.length === 0" class="no-results">
            <mat-card>
              <div class="no-results-content">
                <mat-icon>search_off</mat-icon>
                <h3>No items found</h3>
                <p>No menu items match your search for "{{ searchValue }}"</p>
                <button mat-button (click)="clearSearch()">Clear search</button>
              </div>
            </mat-card>
          </div>
          
          <table mat-table [dataSource]="dataSource" class="modern-table" *ngIf="dataSource.length > 0">
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let el">{{ el.id }}</td>
          </ng-container>
          <ng-container matColumnDef="image">
            <th mat-header-cell *matHeaderCellDef>Image</th>
            <td mat-cell *matCellDef="let el">
              <img [src]="el.imageUrl || 'assets/images/default-food.jpg'" class="thumb" />
            </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Name</th>
            <td mat-cell *matCellDef="let el">{{ el.name }}</td>
          </ng-container>
          <ng-container matColumnDef="price">
            <th mat-header-cell *matHeaderCellDef>Price</th>
            <td mat-cell *matCellDef="let el">‚Çπ{{ el.price }}</td>
          </ng-container>
          <ng-container matColumnDef="category">
            <th mat-header-cell *matHeaderCellDef>Category</th>
            <td mat-cell *matCellDef="let el">{{ el.categoryName }}</td>
          </ng-container>

          <ng-container matColumnDef="veg">
            <th mat-header-cell *matHeaderCellDef>Veg</th>
            <td mat-cell *matCellDef="let el">
              <span [class.veg-chip]="el.veg" [class.nonveg-chip]="!el.veg">
                {{ el.veg ? "üü¢ Veg" : "üî¥ Non-Veg" }}
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="active">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let el">
              <span [class.active-chip]="el.active" [class.inactive-chip]="!el.active">
                {{ el.active ? "Active" : "Inactive" }}
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let el">
              <button mat-icon-button 
                      matTooltip="Edit Item" 
                      matTooltipPosition="above"
                      matTooltipClass="white-tooltip"
                      (click)="openEdit(el)"
                      class="edit-btn">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button 
                      matTooltip="Delete Item" 
                      matTooltipPosition="above"
                      matTooltipClass="white-tooltip"
                      (click)="confirmDelete(el)"
                      class="delete-btn">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
        </div>
      </div>

      <ng-template #loading>
        <div class="loading-container">
          <div class="loading-spinner">
            <mat-spinner diameter="40"></mat-spinner>
          </div>
          <p class="loading-text">Loading menu items...</p>
        </div>
      </ng-template>
    </mat-tab>

    <mat-tab label="Categories">
      <div class="tab-content">
        <app-admin-categories></app-admin-categories>
      </div>
    </mat-tab>
  </mat-tab-group>
</mat-card>