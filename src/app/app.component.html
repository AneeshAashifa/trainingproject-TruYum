<div class="app-background">
  <mat-toolbar class="mat-elevation-z4 custom-navbar" style="padding:0 16px; background: linear-gradient(135deg, #1a2332 0%, #0f1629 100%) !important; color: #f8fafc !important; border-bottom: 1px solid rgba(255,255,255,0.1) !important; box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important;">
    <div class="app-container" style="display:flex;align-items:center;gap:24px;">

      <!-- Brand -->
      <div style="display:flex;align-items:center;gap:12px;">
        <a routerLink="/" style="display:flex;align-items:center;text-decoration:none;">
          <span class="brand-text">TruYum</span>
        </a>
      </div>

      <!-- Main Navigation -->
      <nav style="display:flex; gap:14px; margin-left:24px;">
        <a mat-button routerLink="/menu">
          <mat-icon>restaurant_menu</mat-icon> Menu
        </a>
        <a mat-button routerLink="/cart">
          <mat-icon>shopping_cart</mat-icon> Cart
        </a>
      </nav>

      <span style="flex:1 1 auto"></span>

      <!-- Auth / Admin Section -->
      <div style="display:flex;gap:12px;align-items:center;">
        
        <!-- Show when NOT logged in -->
        <ng-container *ngIf="!isLoggedIn">
          <a mat-button routerLink="/register">
            <mat-icon>person_add</mat-icon> Sign Up
          </a>
          <a mat-button routerLink="/user-login">
            <mat-icon>login</mat-icon> Sign In
          </a>
        </ng-container>

        <!-- Show when logged in -->
        <ng-container *ngIf="isLoggedIn">
          <span class="user-greeting">
            ðŸ‘‹ Hi, {{ role === 'Admin' ? 'Admin' : username }}
          </span>
          <button mat-button (click)="logout()">
            <mat-icon>account_circle</mat-icon> Logout
          </button>
        </ng-container>

        <!-- Always visible: Admin Login -->
        <a mat-button routerLink="/admin-login">
          <mat-icon>admin_panel_settings</mat-icon> Admin
        </a>
      </div>
    </div>
  </mat-toolbar>

  <router-outlet></router-outlet>
  <app-chat></app-chat>
  <app-toast-container></app-toast-container>

</div>